# BASIC Compiler

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —è–∑—ã–∫–∞ BASIC, –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—â–∏–π –∫–æ–¥ –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π Python. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ BASIC, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–∏–ø—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Å—Ç—Ä–æ–∏—Ç –¥–µ—Ä–µ–≤–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (AST), –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –µ–≥–æ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–∏—Ç–∞–µ–º—ã–π Python-–∫–æ–¥.

---

##  –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

-  –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ BASIC —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ `%` (—Ü–µ–ª—ã–µ), `$` (—Å—Ç—Ä–æ–∫–∏), `!` (—á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π)
-  –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –¥–µ—Ä–µ–≤–∞ (AST)
-  –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
-  –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
  - —Å–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
  - —É–¥–∞–ª–µ–Ω–∏–µ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
  - –æ—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–µ—Ç–æ–∫
- ‚öô –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Python-–∫–æ–¥–∞:
  - –º–µ—Ç–∫–∏ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏ (`def label_X:`)
  - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `GOTO`, `GOSUB`, `RETURN`
-  –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π BASIC:
  - `IF`, `THEN`, `ELSE`, `ENDIF`
  - `FOR...NEXT`, `WHILE...WEND`
  - `GOTO`, `GOSUB`, `RETURN`
  - `DIM`, `DATA`, `READ`
  - `INPUT`, `PRINT`, `END`

---

##  –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
basic_compiler/
‚îÇ
‚îú‚îÄ‚îÄ basic_compiler/               # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ ast/                      # –†–∞–±–æ—Ç–∞ —Å AST
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ builder.py            # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ AST –∏–∑ parse-–¥–µ—Ä–µ–≤–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ nodes.py              # –ö–ª–∞—Å—Å—ã —É–∑–ª–æ–≤ AST
‚îÇ   ‚îú‚îÄ‚îÄ codegen.py                # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ Python-–∫–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ optimizer.py              # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ AST
‚îÇ   ‚îú‚îÄ‚îÄ semantic.py               # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
‚îÇ   ‚îú‚îÄ‚îÄ parser.py                 # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ANTLR4
‚îÇ   ‚îú‚îÄ‚îÄ printer.py                # –í—ã–≤–æ–¥ AST –≤ –∫–æ–Ω—Å–æ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –∑–∞–ø—É—Å–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ grammar/                      # –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ ANTLR
‚îÇ   ‚îî‚îÄ‚îÄ Basic.g4
‚îÇ
‚îú‚îÄ‚îÄ generated/                    # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ª–µ–∫—Å–µ—Ä–∞/–ø–∞—Ä—Å–µ—Ä–∞
‚îÇ
‚îú‚îÄ‚îÄ test.bas                      # –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ BASIC
‚îú‚îÄ‚îÄ antlr4-4.9.2-complete.jar     # JAR –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ANTLR
‚îú‚îÄ‚îÄ requirements.txt              # Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ .gitignore
```

---

## ‚öô –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

###  –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
git clone https://github.com/yourusername/basic_compiler.git
cd basic_compiler
```

###  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### üõ† –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–µ–∫—Å–µ—Ä–∞ –∏ –ø–∞—Ä—Å–µ—Ä–∞ (–æ–¥–∏–Ω —Ä–∞–∑)

```bash
java -jar antlr4-4.9.2-complete.jar -Dlanguage=Python3 -o generated grammar/Basic.g4
```

### ‚ñ∂ –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

```bash
python -m basic_compiler.main test.bas
```

---

##  –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã BASIC

###  –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞      | –û–ø–∏—Å–∞–Ω–∏–µ                           |
|--------------|------------------------------------|
| `PRINT`      | –í—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω                     |
| `LET`        | –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ                       |
| `INPUT`      | –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è        |
| `DIM`        | –û–±—ä—è–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞                 |
| `DATA`       | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö               |
| `READ`       | –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `DATA`            |
| `IF`, `THEN`, `ELSE`, `ENDIF` | –£—Å–ª–æ–≤–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ |
| `FOR`, `NEXT`| –¶–∏–∫–ª —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º                  |
| `WHILE`, `WEND` | –¶–∏–∫–ª —Å —É—Å–ª–æ–≤–∏–µ–º               |
| `GOTO`, `LABEL` | –ë–µ–∑—É—Å–ª–æ–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ –º–µ—Ç–∫–µ    |
| `GOSUB`, `RETURN` | –ü–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏ –≤–æ–∑–≤—Ä–∞—Ç        |
| `END`        | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã               |

###  –û–ø–µ—Ä–∞—Ü–∏–∏ –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

- –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞: `+`, `-`, `*`, `/`
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: `=`, `<`, `>`, `<=`, `>=`, `<>`
- –°–∫–æ–±–∫–∏: `( )` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

---

##  –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ BASIC (`test.bas`)

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
- –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ (`A`, `B`, `C%`, `NAME$`)
- —Ü–∏–∫–ª—ã, —É—Å–ª–æ–≤–∏—è, –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º—ã, –º–∞—Å—Å–∏–≤—ã –∏ –≤–≤–æ–¥/–≤—ã–≤–æ–¥

---

##  –ü—Ä–∏–º–µ—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

| –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏                     | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏              |
|-----------------------------------|--------------------------------|
| `LET X = 1 + 2 * 3`               | `LET X = 7`                    |
| `GOTO END\nPRINT "Skip me"`       | `GOTO END`                     |
| `LABEL UNUSED:` (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) | ‚Äî (—É–¥–∞–ª–µ–Ω–∞)                    |

---


