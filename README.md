# BASIC Compiler

Компилятор языка BASIC, преобразующий код в исполняемый Python. Поддерживает ключевые синтаксические конструкции BASIC, анализирует типы переменных, строит дерево синтаксиса (AST), оптимизирует его и генерирует читаемый Python-код.

---

##  Возможности

-  Поддержка синтаксиса BASIC с переменными `%` (целые), `$` (строки), `!` (числа с плавающей точкой)
-  Построение абстрактного синтаксического дерева (AST)
-  Семантический анализ: проверка типов и структуры
-  Оптимизация:
  - свертывание арифметических выражений
  - удаление мертвого кода
  - очистка неиспользуемых меток
-  Генерация Python-кода:
  - метки как функции (`def label_X:`)
  - реализация `GOTO`, `GOSUB`, `RETURN`
-  Поддержка основных конструкций BASIC:
  - `IF`, `THEN`, `ELSE`, `ENDIF`
  - `FOR...NEXT`, `WHILE...WEND`
  - `GOTO`, `GOSUB`, `RETURN`
  - `DIM`, `DATA`, `READ`
  - `INPUT`, `PRINT`, `END`

---

##  Структура проекта

```
basic_compiler/
│
├── basic_compiler/               # Основной пакет компилятора
│   ├── ast/                      # Работа с AST
│   │   ├── builder.py            # Построение AST из parse-дерева
│   │   └── nodes.py              # Классы узлов AST
│   ├── codegen.py                # Генерация исполняемого Python-кода
│   ├── optimizer.py              # Оптимизации AST
│   ├── semantic.py               # Семантический анализ
│   ├── parser.py                 # Интеграция с ANTLR4
│   ├── printer.py                # Вывод AST в консоль
│   └── main.py                   # Точка входа: запуск компиляции
│
├── grammar/                      # Грамматика ANTLR
│   └── Basic.g4
│
├── generated/                    # Сгенерированные файлы лексера/парсера
│
├── test.bas                      # Пример программы на BASIC
├── antlr4-4.9.2-complete.jar     # JAR для генерации ANTLR
├── requirements.txt              # Python-зависимости
└── .gitignore
```

---

##  Установка и запуск

###  Клонирование

```bash
git clone https://github.com/yourusername/basic_compiler.git
cd basic_compiler
```

###  Установка зависимостей

```bash
pip install -r requirements.txt
```

###  Генерация лексера и парсера (один раз)

```bash
java -jar antlr4-4.9.2-complete.jar -Dlanguage=Python3 -o generated grammar/Basic.g4
```

###  Запуск компиляции

```bash
python -m basic_compiler.main test.bas
```

---

##  Поддерживаемые элементы BASIC

###  Команды

| Команда      | Описание                           |
|--------------|------------------------------------|
| `PRINT`      | Вывод на экран                     |
| `LET`        | Присваивание                       |
| `INPUT`      | Ввод данных от пользователя        |
| `DIM`        | Объявление массива                 |
| `DATA`       | Инициализация данных               |
| `READ`       | Чтение данных из `DATA`            |
| `IF`, `THEN`, `ELSE`, `ENDIF` | Условные конструкции |
| `FOR`, `NEXT`| Цикл с параметром                  |
| `WHILE`, `WEND` | Цикл с условием               |
| `GOTO`, `LABEL` | Безусловный переход по метке    |
| `GOSUB`, `RETURN` | Подпрограмма и возврат        |
| `END`        | Завершение программы               |

###  Операции и выражения

- Арифметика: `+`, `-`, `*`, `/`
- Сравнение: `=`, `<`, `>`, `<=`, `>=`, `<>`
- Скобки: `( )` для группировки

---

##  Пример программы на BASIC (`test.bas`)

Программа демонстрирует все ключевые конструкции:
- переменные разных типов (`A`, `B`, `C%`, `NAME$`)
- циклы, условия, подпрограммы, массивы и ввод/вывод

---

##  Примеры оптимизаций

| До оптимизации                     | После оптимизации              |
|-----------------------------------|--------------------------------|
| `LET X = 1 + 2 * 3`               | `LET X = 7`                    |
| `GOTO END\nPRINT "Skip me"`       | `GOTO END`                     |


---


